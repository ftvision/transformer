<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 420">
  <!-- Pure black background -->
  <rect width="800" height="420" fill="#000000"/>

  <!-- Title -->
  <text x="400" y="35" font-family="CMU Serif, Georgia, serif" font-size="26" fill="#ffffff" text-anchor="middle">Layer Normalization</text>

  <!-- Formula in yellow -->
  <text x="400" y="65" font-family="CMU Serif, Georgia, serif" font-size="16" fill="#FFFF00" text-anchor="middle" font-style="italic">
    LayerNorm(x) = γ · (x − μ) / σ + β
  </text>

  <!-- ============ Step 1: Input ============ -->
  <g transform="translate(40, 100)">
    <text x="55" y="-10" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#888888" text-anchor="middle">Input</text>

    <!-- Bars - teal, different heights showing varied features -->
    <rect x="15" y="20" width="18" height="100" fill="#29ABCA"/>
    <rect x="40" y="75" width="18" height="45" fill="#29ABCA"/>
    <rect x="65" y="45" width="18" height="75" fill="#29ABCA"/>
    <rect x="90" y="60" width="18" height="60" fill="#29ABCA"/>

    <!-- Values -->
    <text x="24" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">5.2</text>
    <text x="49" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">1.1</text>
    <text x="74" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">3.4</text>
    <text x="99" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">2.0</text>

    <!-- Stats -->
    <text x="55" y="155" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#666666" text-anchor="middle">μ = 2.93</text>
  </g>

  <!-- Arrow 1 -->
  <g transform="translate(155, 160)">
    <line x1="0" y1="0" x2="45" y2="0" stroke="#666666" stroke-width="2"/>
    <polygon points="45,0 38,-4 38,4" fill="#666666"/>
    <text x="22" y="-10" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="middle">−μ</text>
  </g>

  <!-- ============ Step 2: Centered ============ -->
  <g transform="translate(210, 100)">
    <text x="55" y="-10" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#888888" text-anchor="middle">x − μ</text>

    <!-- Zero line -->
    <line x1="5" y1="85" x2="115" y2="85" stroke="#444444" stroke-width="1" stroke-dasharray="3,2"/>

    <!-- Bars relative to zero - some up, some down -->
    <rect x="15" y="35" width="18" height="50" fill="#29ABCA"/>
    <rect x="40" y="85" width="18" height="40" fill="#29ABCA"/>
    <rect x="65" y="75" width="18" height="10" fill="#29ABCA"/>
    <rect x="90" y="85" width="18" height="20" fill="#29ABCA"/>

    <!-- Values -->
    <text x="24" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">+2.3</text>
    <text x="49" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">−1.8</text>
    <text x="74" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">+0.5</text>
    <text x="99" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">−0.9</text>

    <!-- Stats -->
    <text x="55" y="155" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#83C167" text-anchor="middle">μ = 0</text>
  </g>

  <!-- Arrow 2 -->
  <g transform="translate(325, 160)">
    <line x1="0" y1="0" x2="45" y2="0" stroke="#666666" stroke-width="2"/>
    <polygon points="45,0 38,-4 38,4" fill="#666666"/>
    <text x="22" y="-10" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="middle">÷σ</text>
  </g>

  <!-- ============ Step 3: Normalized ============ -->
  <g transform="translate(380, 100)">
    <text x="55" y="-10" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#888888" text-anchor="middle">(x−μ)/σ</text>

    <!-- Zero line -->
    <line x1="5" y1="85" x2="115" y2="85" stroke="#444444" stroke-width="1" stroke-dasharray="3,2"/>

    <!-- Scale markers -->
    <text x="120" y="55" font-family="monospace" font-size="9" fill="#444444">+1</text>
    <text x="120" y="88" font-family="monospace" font-size="9" fill="#444444">0</text>
    <text x="120" y="120" font-family="monospace" font-size="9" fill="#444444">−1</text>

    <!-- Bars - normalized scale -->
    <rect x="15" y="40" width="18" height="45" fill="#83C167"/>
    <rect x="40" y="85" width="18" height="35" fill="#83C167"/>
    <rect x="65" y="77" width="18" height="8" fill="#83C167"/>
    <rect x="90" y="85" width="18" height="18" fill="#83C167"/>

    <!-- Values -->
    <text x="24" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">+1.5</text>
    <text x="49" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">−1.2</text>
    <text x="74" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">+0.3</text>
    <text x="99" y="135" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">−0.6</text>

    <!-- Stats -->
    <text x="55" y="155" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#83C167" text-anchor="middle">σ = 1</text>
  </g>

  <!-- Arrow 3 -->
  <g transform="translate(510, 160)">
    <line x1="0" y1="0" x2="45" y2="0" stroke="#666666" stroke-width="2"/>
    <polygon points="45,0 38,-4 38,4" fill="#666666"/>
    <text x="22" y="-10" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="middle">γ,β</text>
  </g>

  <!-- ============ Step 4: Output ============ -->
  <g transform="translate(565, 100)">
    <text x="55" y="-10" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#FFFF00" text-anchor="middle">Output</text>

    <!-- Bars - yellow output -->
    <rect x="15" y="35" width="18" height="50" fill="#FFFF00"/>
    <rect x="40" y="85" width="18" height="38" fill="#FFFF00"/>
    <rect x="65" y="72" width="18" height="13" fill="#FFFF00"/>
    <rect x="90" y="85" width="18" height="22" fill="#FFFF00"/>

    <!-- Label -->
    <text x="55" y="155" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#FFFF00" text-anchor="middle">learned γ, β</text>
  </g>

  <!-- ============ Key Points ============ -->
  <g transform="translate(50, 280)">
    <!-- Per-token -->
    <g transform="translate(0, 0)">
      <circle cx="10" cy="8" r="4" fill="#29ABCA"/>
      <text x="25" y="12" font-family="CMU Serif, Georgia, serif" font-size="13" fill="#888888">Normalizes each token independently across features</text>
    </g>

    <!-- Stable training -->
    <g transform="translate(0, 30)">
      <circle cx="10" cy="8" r="4" fill="#83C167"/>
      <text x="25" y="12" font-family="CMU Serif, Georgia, serif" font-size="13" fill="#888888">Keeps activations bounded → stable gradients</text>
    </g>

    <!-- Learnable -->
    <g transform="translate(0, 60)">
      <circle cx="10" cy="8" r="4" fill="#FFFF00"/>
      <text x="25" y="12" font-family="CMU Serif, Georgia, serif" font-size="13" fill="#888888">γ (scale) and β (shift) are learned per feature</text>
    </g>
  </g>

  <!-- vs Batch Norm note -->
  <g transform="translate(450, 290)">
    <text x="0" y="0" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#FC6255">vs BatchNorm:</text>
    <text x="0" y="22" font-family="CMU Serif, Georgia, serif" font-size="12" fill="#666666">LayerNorm: across features (d_model)</text>
    <text x="0" y="42" font-family="CMU Serif, Georgia, serif" font-size="12" fill="#666666">BatchNorm: across batch dimension</text>
    <text x="0" y="62" font-family="CMU Serif, Georgia, serif" font-size="12" fill="#666666">→ LayerNorm works with batch_size=1</text>
  </g>
</svg>
