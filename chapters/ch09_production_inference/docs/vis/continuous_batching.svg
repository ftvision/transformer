<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <!-- Pure black background -->
  <rect width="900" height="500" fill="#000000"/>

  <!-- Title -->
  <text x="450" y="35" font-family="CMU Serif, Georgia, serif" font-size="24" fill="#ffffff" text-anchor="middle">Continuous Batching vs Static Batching</text>

  <!-- Subtitle -->
  <text x="450" y="60" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#888888" text-anchor="middle">
    Iteration-level scheduling keeps the GPU fully utilized
  </text>

  <!-- ============ Static Batching ============ -->
  <g transform="translate(50, 100)">
    <text x="175" y="-10" font-family="CMU Serif, Georgia, serif" font-size="16" fill="#FF6B6B" text-anchor="middle">Static Batching</text>

    <!-- Time axis -->
    <line x1="0" y1="180" x2="380" y2="180" stroke="#444444" stroke-width="1"/>
    <text x="380" y="195" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#666666">time →</text>

    <!-- Request A (medium) -->
    <g transform="translate(0, 20)">
      <text x="-5" y="15" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="end">A:</text>
      <rect x="0" y="0" width="180" height="25" fill="#29ABCA" fill-opacity="0.6" stroke="#29ABCA" stroke-width="1"/>
      <text x="90" y="17" font-family="monospace" font-size="10" fill="#29ABCA" text-anchor="middle">generating...</text>
      <rect x="180" y="0" width="170" height="25" fill="#29ABCA" fill-opacity="0.15" stroke="none"/>
      <text x="265" y="17" font-family="monospace" font-size="10" fill="#666666" text-anchor="middle">waiting for batch</text>
    </g>

    <!-- Request B (short) -->
    <g transform="translate(0, 55)">
      <text x="-5" y="15" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="end">B:</text>
      <rect x="0" y="0" width="80" height="25" fill="#FFFF00" fill-opacity="0.6" stroke="#FFFF00" stroke-width="1"/>
      <text x="40" y="17" font-family="monospace" font-size="10" fill="#FFFF00" text-anchor="middle">done</text>
      <rect x="80" y="0" width="270" height="25" fill="#FF6B6B" fill-opacity="0.2" stroke="none"/>
      <text x="215" y="17" font-family="monospace" font-size="10" fill="#FF6B6B" text-anchor="middle">idle (waiting for slowest)</text>
    </g>

    <!-- Request C (long) -->
    <g transform="translate(0, 90)">
      <text x="-5" y="15" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="end">C:</text>
      <rect x="0" y="0" width="350" height="25" fill="#83C167" fill-opacity="0.6" stroke="#83C167" stroke-width="1"/>
      <text x="175" y="17" font-family="monospace" font-size="10" fill="#83C167" text-anchor="middle">generating (slowest)...</text>
    </g>

    <!-- Batch boundary -->
    <line x1="350" y1="10" x2="350" y2="125" stroke="#FF6B6B" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="355" y="70" font-family="CMU Serif, Georgia, serif" font-size="10" fill="#FF6B6B">batch done</text>

    <!-- Problem annotation -->
    <text x="175" y="215" font-family="CMU Serif, Georgia, serif" font-size="13" fill="#FF6B6B" text-anchor="middle">GPU idles while waiting for slowest request</text>
  </g>

  <!-- ============ Continuous Batching ============ -->
  <g transform="translate(480, 100)">
    <text x="175" y="-10" font-family="CMU Serif, Georgia, serif" font-size="16" fill="#83C167" text-anchor="middle">Continuous Batching</text>

    <!-- Time axis -->
    <line x1="0" y1="180" x2="380" y2="180" stroke="#444444" stroke-width="1"/>
    <text x="380" y="195" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#666666">time →</text>

    <!-- Request A -->
    <g transform="translate(0, 20)">
      <text x="-5" y="15" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="end">A:</text>
      <rect x="0" y="0" width="180" height="25" fill="#29ABCA" fill-opacity="0.6" stroke="#29ABCA" stroke-width="1"/>
      <text x="90" y="17" font-family="monospace" font-size="10" fill="#29ABCA" text-anchor="middle">generating...</text>
    </g>

    <!-- Request B (finishes early, D starts) -->
    <g transform="translate(0, 55)">
      <text x="-5" y="15" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="end">B:</text>
      <rect x="0" y="0" width="80" height="25" fill="#FFFF00" fill-opacity="0.6" stroke="#FFFF00" stroke-width="1"/>
      <text x="40" y="17" font-family="monospace" font-size="10" fill="#FFFF00" text-anchor="middle">done</text>
    </g>

    <!-- Request D (starts when B finishes) -->
    <g transform="translate(0, 55)">
      <text x="85" y="15" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#E67E22" text-anchor="start">D:</text>
      <rect x="100" y="0" width="150" height="25" fill="#E67E22" fill-opacity="0.6" stroke="#E67E22" stroke-width="1"/>
      <text x="175" y="17" font-family="monospace" font-size="10" fill="#E67E22" text-anchor="middle">new request!</text>
    </g>

    <!-- Request C (long) -->
    <g transform="translate(0, 90)">
      <text x="-5" y="15" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#888888" text-anchor="end">C:</text>
      <rect x="0" y="0" width="350" height="25" fill="#83C167" fill-opacity="0.6" stroke="#83C167" stroke-width="1"/>
      <text x="175" y="17" font-family="monospace" font-size="10" fill="#83C167" text-anchor="middle">generating...</text>
    </g>

    <!-- Iteration markers -->
    <g transform="translate(0, 130)">
      <line x1="80" y1="0" x2="80" y2="-115" stroke="#83C167" stroke-width="1" stroke-dasharray="3,3"/>
      <text x="80" y="15" font-family="CMU Serif, Georgia, serif" font-size="9" fill="#83C167" text-anchor="middle">B done</text>
      <text x="80" y="27" font-family="CMU Serif, Georgia, serif" font-size="9" fill="#E67E22" text-anchor="middle">D starts</text>
    </g>

    <!-- Benefit annotation -->
    <text x="175" y="215" font-family="CMU Serif, Georgia, serif" font-size="13" fill="#83C167" text-anchor="middle">New requests join immediately → GPU stays busy</text>
  </g>

  <!-- ============ Iteration Detail ============ -->
  <g transform="translate(100, 340)">
    <text x="350" y="0" font-family="CMU Serif, Georgia, serif" font-size="18" fill="#ffffff" text-anchor="middle">Iteration-Level Scheduling</text>

    <!-- Iteration boxes -->
    <g transform="translate(0, 30)">
      <!-- Iter 1 -->
      <rect x="0" y="0" width="120" height="70" fill="#29ABCA" fill-opacity="0.1" stroke="#444444" stroke-width="1" rx="3"/>
      <text x="60" y="18" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#666666" text-anchor="middle">Iteration 1</text>
      <text x="60" y="38" font-family="monospace" font-size="10" fill="#29ABCA" text-anchor="middle">[A, B, C]</text>
      <text x="60" y="55" font-family="monospace" font-size="9" fill="#888888" text-anchor="middle">1 token each</text>

      <!-- Arrow -->
      <line x1="125" y1="35" x2="155" y2="35" stroke="#888888" stroke-width="1.5"/>
      <polygon points="155,35 150,32 150,38" fill="#888888"/>

      <!-- Iter 2 -->
      <rect x="160" y="0" width="120" height="70" fill="#29ABCA" fill-opacity="0.1" stroke="#444444" stroke-width="1" rx="3"/>
      <text x="220" y="18" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#666666" text-anchor="middle">Iteration N</text>
      <text x="220" y="38" font-family="monospace" font-size="10" fill="#FFFF00" text-anchor="middle">[A, B, C]</text>
      <text x="220" y="55" font-family="monospace" font-size="9" fill="#FFFF00" text-anchor="middle">B finishes!</text>

      <!-- Arrow -->
      <line x1="285" y1="35" x2="315" y2="35" stroke="#888888" stroke-width="1.5"/>
      <polygon points="315,35 310,32 310,38" fill="#888888"/>

      <!-- Iter 3 -->
      <rect x="320" y="0" width="120" height="70" fill="#29ABCA" fill-opacity="0.1" stroke="#444444" stroke-width="1" rx="3"/>
      <text x="380" y="18" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#666666" text-anchor="middle">Iteration N+1</text>
      <text x="380" y="38" font-family="monospace" font-size="10" fill="#E67E22" text-anchor="middle">[A, D, C]</text>
      <text x="380" y="55" font-family="monospace" font-size="9" fill="#E67E22" text-anchor="middle">D replaces B</text>

      <!-- Arrow -->
      <line x1="445" y1="35" x2="475" y2="35" stroke="#888888" stroke-width="1.5"/>
      <polygon points="475,35 470,32 470,38" fill="#888888"/>

      <!-- Iter 4 -->
      <rect x="480" y="0" width="120" height="70" fill="#29ABCA" fill-opacity="0.1" stroke="#444444" stroke-width="1" rx="3"/>
      <text x="540" y="18" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#666666" text-anchor="middle">Iteration M</text>
      <text x="540" y="38" font-family="monospace" font-size="10" fill="#29ABCA" text-anchor="middle">[A, D, C]</text>
      <text x="540" y="55" font-family="monospace" font-size="9" fill="#29ABCA" text-anchor="middle">A finishes!</text>

      <!-- Continue dots -->
      <text x="640" y="40" font-family="CMU Serif, Georgia, serif" font-size="18" fill="#666666">...</text>
    </g>

    <!-- Key insight -->
    <text x="350" y="130" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#888888" text-anchor="middle">Batch composition changes every iteration</text>
  </g>
</svg>