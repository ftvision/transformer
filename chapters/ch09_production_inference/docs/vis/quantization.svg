<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520">
  <!-- Pure black background -->
  <rect width="900" height="520" fill="#000000"/>

  <!-- Title -->
  <text x="450" y="35" font-family="CMU Serif, Georgia, serif" font-size="24" fill="#ffffff" text-anchor="middle">Quantization: Trading Precision for Memory</text>

  <!-- Subtitle -->
  <text x="450" y="60" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#888888" text-anchor="middle">
    Reduce model size by representing weights with fewer bits
  </text>

  <!-- ============ FP16 vs INT4 ============ -->
  <g transform="translate(50, 100)">
    <text x="175" y="-10" font-family="CMU Serif, Georgia, serif" font-size="16" fill="#29ABCA" text-anchor="middle">FP16 (16 bits)</text>

    <!-- FP16 representation -->
    <g transform="translate(0, 10)">
      <text x="0" y="15" font-family="CMU Serif, Georgia, serif" font-size="12" fill="#888888">Weight: 0.2341</text>

      <!-- Bit boxes -->
      <g transform="translate(0, 25)">
        <!-- Sign (1 bit) -->
        <rect x="0" y="0" width="20" height="30" fill="#FF6B6B" fill-opacity="0.5" stroke="#FF6B6B" stroke-width="1"/>
        <text x="10" y="20" font-family="monospace" font-size="10" fill="#FF6B6B" text-anchor="middle">0</text>

        <!-- Exponent (5 bits) -->
        <rect x="22" y="0" width="100" height="30" fill="#FFFF00" fill-opacity="0.3" stroke="#FFFF00" stroke-width="1"/>
        <text x="72" y="20" font-family="monospace" font-size="10" fill="#FFFF00" text-anchor="middle">01100</text>

        <!-- Mantissa (10 bits) -->
        <rect x="124" y="0" width="200" height="30" fill="#29ABCA" fill-opacity="0.3" stroke="#29ABCA" stroke-width="1"/>
        <text x="224" y="20" font-family="monospace" font-size="10" fill="#29ABCA" text-anchor="middle">1110111110</text>
      </g>

      <!-- Labels -->
      <text x="10" y="75" font-family="CMU Serif, Georgia, serif" font-size="9" fill="#FF6B6B" text-anchor="middle">sign</text>
      <text x="72" y="75" font-family="CMU Serif, Georgia, serif" font-size="9" fill="#FFFF00" text-anchor="middle">exponent</text>
      <text x="224" y="75" font-family="CMU Serif, Georgia, serif" font-size="9" fill="#29ABCA" text-anchor="middle">mantissa</text>

      <text x="175" y="100" font-family="monospace" font-size="12" fill="#888888" text-anchor="middle">= 2 bytes per weight</text>
    </g>
  </g>

  <!-- INT4 Section -->
  <g transform="translate(500, 100)">
    <text x="175" y="-10" font-family="CMU Serif, Georgia, serif" font-size="16" fill="#83C167" text-anchor="middle">INT4 (4 bits)</text>

    <!-- INT4 representation -->
    <g transform="translate(0, 10)">
      <text x="0" y="15" font-family="CMU Serif, Georgia, serif" font-size="12" fill="#888888">Weight: maps to integer -8 to +7</text>

      <!-- Bit boxes -->
      <g transform="translate(100, 25)">
        <rect x="0" y="0" width="25" height="30" fill="#83C167" fill-opacity="0.5" stroke="#83C167" stroke-width="1"/>
        <text x="12" y="20" font-family="monospace" font-size="10" fill="#83C167" text-anchor="middle">0</text>

        <rect x="27" y="0" width="25" height="30" fill="#83C167" fill-opacity="0.5" stroke="#83C167" stroke-width="1"/>
        <text x="40" y="20" font-family="monospace" font-size="10" fill="#83C167" text-anchor="middle">1</text>

        <rect x="54" y="0" width="25" height="30" fill="#83C167" fill-opacity="0.5" stroke="#83C167" stroke-width="1"/>
        <text x="67" y="20" font-family="monospace" font-size="10" fill="#83C167" text-anchor="middle">0</text>

        <rect x="81" y="0" width="25" height="30" fill="#83C167" fill-opacity="0.5" stroke="#83C167" stroke-width="1"/>
        <text x="94" y="20" font-family="monospace" font-size="10" fill="#83C167" text-anchor="middle">0</text>
      </g>

      <text x="152" y="75" font-family="CMU Serif, Georgia, serif" font-size="9" fill="#83C167" text-anchor="middle">= 4 (integer)</text>

      <text x="175" y="100" font-family="monospace" font-size="12" fill="#888888" text-anchor="middle">= 0.5 bytes per weight</text>
    </g>
  </g>

  <!-- ============ Block Quantization ============ -->
  <g transform="translate(50, 250)">
    <text x="400" y="0" font-family="CMU Serif, Georgia, serif" font-size="18" fill="#ffffff" text-anchor="middle">Block Quantization (Q4_0)</text>

    <!-- Original weights -->
    <g transform="translate(0, 30)">
      <text x="0" y="15" font-family="CMU Serif, Georgia, serif" font-size="12" fill="#888888">FP16 weights (block of 32):</text>

      <g transform="translate(0, 25)">
        <rect x="0" y="0" width="50" height="30" fill="#29ABCA" fill-opacity="0.3" stroke="#29ABCA" stroke-width="1"/>
        <text x="25" y="20" font-family="monospace" font-size="9" fill="#29ABCA" text-anchor="middle">0.23</text>

        <rect x="52" y="0" width="50" height="30" fill="#29ABCA" fill-opacity="0.3" stroke="#29ABCA" stroke-width="1"/>
        <text x="77" y="20" font-family="monospace" font-size="9" fill="#29ABCA" text-anchor="middle">-0.15</text>

        <rect x="104" y="0" width="50" height="30" fill="#29ABCA" fill-opacity="0.3" stroke="#29ABCA" stroke-width="1"/>
        <text x="129" y="20" font-family="monospace" font-size="9" fill="#29ABCA" text-anchor="middle">0.42</text>

        <rect x="156" y="0" width="50" height="30" fill="#29ABCA" fill-opacity="0.3" stroke="#29ABCA" stroke-width="1"/>
        <text x="181" y="20" font-family="monospace" font-size="9" fill="#29ABCA" text-anchor="middle">-0.31</text>

        <text x="230" y="20" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#666666">...</text>

        <text x="280" y="20" font-family="monospace" font-size="10" fill="#888888">(32 values × 2 bytes = 64 bytes)</text>
      </g>
    </g>

    <!-- Arrow -->
    <g transform="translate(350, 95)">
      <line x1="0" y1="0" x2="0" y2="30" stroke="#83C167" stroke-width="2"/>
      <polygon points="0,35 -5,28 5,28" fill="#83C167"/>
      <text x="15" y="20" font-family="CMU Serif, Georgia, serif" font-size="11" fill="#83C167">quantize</text>
    </g>

    <!-- Quantized block -->
    <g transform="translate(0, 140)">
      <text x="0" y="15" font-family="CMU Serif, Georgia, serif" font-size="12" fill="#888888">Quantized block:</text>

      <g transform="translate(0, 25)">
        <!-- Scale factor -->
        <rect x="0" y="0" width="80" height="30" fill="#FFFF00" fill-opacity="0.4" stroke="#FFFF00" stroke-width="1"/>
        <text x="40" y="20" font-family="monospace" font-size="9" fill="#FFFF00" text-anchor="middle">scale=0.06</text>

        <!-- Quantized values (packed) -->
        <rect x="85" y="0" width="35" height="30" fill="#83C167" fill-opacity="0.4" stroke="#83C167" stroke-width="1"/>
        <text x="102" y="20" font-family="monospace" font-size="9" fill="#83C167" text-anchor="middle">4</text>

        <rect x="122" y="0" width="35" height="30" fill="#83C167" fill-opacity="0.4" stroke="#83C167" stroke-width="1"/>
        <text x="139" y="20" font-family="monospace" font-size="9" fill="#83C167" text-anchor="middle">-3</text>

        <rect x="159" y="0" width="35" height="30" fill="#83C167" fill-opacity="0.4" stroke="#83C167" stroke-width="1"/>
        <text x="176" y="20" font-family="monospace" font-size="9" fill="#83C167" text-anchor="middle">7</text>

        <rect x="196" y="0" width="35" height="30" fill="#83C167" fill-opacity="0.4" stroke="#83C167" stroke-width="1"/>
        <text x="213" y="20" font-family="monospace" font-size="9" fill="#83C167" text-anchor="middle">-5</text>

        <text x="255" y="20" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#666666">...</text>

        <text x="300" y="20" font-family="monospace" font-size="10" fill="#888888">(2 bytes + 16 bytes = 18 bytes)</text>
      </g>

      <!-- Labels -->
      <text x="40" y="75" font-family="CMU Serif, Georgia, serif" font-size="9" fill="#FFFF00" text-anchor="middle">FP16</text>
      <text x="150" y="75" font-family="CMU Serif, Georgia, serif" font-size="9" fill="#83C167" text-anchor="middle">32 × 4-bit integers (packed into 16 bytes)</text>
    </g>

    <!-- Memory comparison -->
    <g transform="translate(550, 60)">
      <rect x="0" y="0" width="220" height="100" fill="#83C167" fill-opacity="0.1" stroke="#83C167" stroke-width="1" rx="5"/>
      <text x="110" y="25" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#83C167" text-anchor="middle">Memory per Block</text>
      <text x="20" y="50" font-family="monospace" font-size="11" fill="#29ABCA">FP16:  64 bytes</text>
      <text x="20" y="70" font-family="monospace" font-size="11" fill="#83C167">Q4_0:  18 bytes</text>
      <text x="20" y="90" font-family="monospace" font-size="11" fill="#FFFF00">Ratio: 3.5x smaller</text>
    </g>
  </g>

  <!-- ============ Dequantization ============ -->
  <g transform="translate(50, 430)">
    <text x="0" y="0" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#888888">Dequantize at inference:</text>
    <text x="170" y="0" font-family="monospace" font-size="12" fill="#83C167">w = q × scale</text>
    <text x="300" y="0" font-family="CMU Serif, Georgia, serif" font-size="12" fill="#888888">→</text>
    <text x="320" y="0" font-family="monospace" font-size="12" fill="#29ABCA">4 × 0.06 = 0.24 ≈ 0.23</text>
  </g>

  <!-- Model size comparison -->
  <g transform="translate(550, 430)">
    <text x="0" y="0" font-family="CMU Serif, Georgia, serif" font-size="14" fill="#ffffff">7B Model Size:</text>
    <text x="0" y="25" font-family="monospace" font-size="12" fill="#29ABCA">FP16: 14 GB</text>
    <text x="120" y="25" font-family="monospace" font-size="12" fill="#83C167">Q4: ~4 GB</text>
  </g>
</svg>